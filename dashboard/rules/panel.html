<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Rules</title>
    <link rel="stylesheet" href="./panel.css" />
    <style>
        .kv {
            display: flex;
            gap: 8px;
            align-items: center;
            margin: 6px 0;
        }

        .kv label {
            width: 200px;
            opacity: .8;
        }

        .mono {
            font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
        }
    </style>
</head>

<body>
    <div class="wrap">
        <h2>Rules（外部JSONの読み込み）</h2>

        <div class="row">
            <input id="file" type="file" accept=".json,application/json" />
            <button id="apply">読み込んで適用</button>
            <button id="export">現在のルールを書き出し</button>
        </div>

        <div class="kv"><label>現在のルール名（Dashboard）</label>
            <div id="nameDashboard" class="mono">—</div>
        </div>
        <div class="kv"><label>現在のルール名（Graphics）</label>
            <div id="nameGraphics" class="mono">—</div>
        </div>
        <div class="kv"><label>現在のルール名（Graphics短縮EN）</label>
            <div id="nameGraphicsShortEn" class="mono">—</div>
        </div>
        <div class="kv"><label>試技回数 attemptsCount</label>
            <div id="attemptsCount" class="mono">—</div>
        </div>
        <div class="kv"><label>リトライ上限 retryAttemptsCount</label>
            <div id="retryAttemptsCount" class="mono">—</div>
        </div>

        <div class="status" style="margin-top:10px">
            <div>状態: <span id="state">—</span></div>
            <div style="font-size:12px;opacity:.8;margin-top:6px">
                JSON フォーマット例：
                <pre class="mono">{
  "nameDashboard": "秋大会ルール",
  "nameGraphics": "AUTUMN CUP",
  "nameGraphicsShortEn": "AUT",
  "attemptsCount": 3,
  "retryAttemptsCount": 2,
  "items": [
    { "key": "red",    "labelDashboard": "赤",   "labelGraphics": "RED",    "pointsCorrect": 3, "pointsWrong": 1, "cap": 5 },
    { "key": "yellow", "labelDashboard": "黄",   "labelGraphics": "YELLOW", "pointsCorrect": 3, "pointsWrong": 1, "cap": 5 },
    { "key": "blue",   "labelDashboard": "青",   "labelGraphics": "BLUE",   "pointsCorrect": 3, "pointsWrong": 1, "cap": 5 },
    { "key": "free",   "labelDashboard": "自由", "labelGraphics": "FREE",   "pointsCorrect": 5, "pointsWrong": 0, "cap": 1 }
  ]
}</pre>
            </div>
        </div>
    </div>

    <script src="/nodecg-api.min.js"></script>
    <script src="./panel.js"></script>
</body>

</html>