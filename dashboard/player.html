<!DOCTYPE html>
<html lang = "ja">
<head>
    <meta charset="UTF-8" />
    <meta lang="ja" />
    <title>競技者の切り替え</title>
</head>
<body>
    <p>更新ボタンを押すと更新されます</p>
    <p>得点もリセットされます</p>
    <form onsubmit="return setNextPlayer();">
        <input type="submit" value="次へ" />
    </form>
    <form onsubmit="return setPrevPlayer();">
        <input type="submit" value="前へ" />
    </form>
    <form onsubmit="return setPlayerIdNum();">
        ゼッケン番号：<input type = "text" name = "playerId" />
        <input type="submit" value="切り替え" />
    </form>
</body>
<script type="text/javascript">
    const idInput = document.getElementsByName("playerId")[0];
    nodecg.Replicant("playerId").on("change", (newVal, oldVal) => {
        idInput.value = newVal;
    });

    function setPlayerName() {
        nodecg.Replicant("playerName").value = idInput.value;

        nodecg.Replicant("point").value = {
            red: [],    // 正しければ1, 誤りなら0をappendする
            yellow: [],
            blue: [],
            can: [],
            tennis: []
        }

        nodecg.Replicant("totalPoint").value = 0;

        nodecg.Replicant("retry").value = 0;

        nodecg.sendMessage("reset");
    }
</script>
</html>
